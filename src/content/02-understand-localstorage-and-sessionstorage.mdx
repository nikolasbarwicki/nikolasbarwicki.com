---
title: "LocalStorage i SessionStorage?"
slug: localstorage-sessionstorage
date: 2021-03-21
category: javascript
published: true
---

## ale lipa

ZarÃ³wno `localStorage` jak i `sessionStorage` sÄ… czÄ™sciami web storage API i sÅ‚uÅ¼Ä… do zapisywania key/value pairs lokalnie w przeglÄ…darce. Dane zapisane w obu tych miejscach nie zostanÄ… wymazane po refreshu strony (dla `sessionStorage`) a nawet po restercie przeglararki (`localStorage`). Mamy cookisiy wiec po co ich uÅ¼ywaÄ‡? Poznajmy trzy podstawowe rÃ³Å¼nice miedzy `localStorage`/`sessionStorage` a cookiesami:

- dane przechowujemy lokalnie i nie wysyÅ‚amy ich przy kaÅ¼dym requescie w headerze do serwera, jest to poÅ¼Ä…dane z punktu widzenia bezpieczeÅ„stwa a takÅ¼e bezpoÅ›rednio wiÄ…Å¼Ä™ siÄ™ z podpunktem nastÄ™pnym,
- dzieki temu Å¼e nie wysyÅ‚amy tych danych przy kaÅ¼dym requescie moÅ¼emy zapisywaÄ‡ do 10mb danych w przypadku wiekszosci modern browsers,
- proste API jset proste do nauczenia w ktortym czasie i Å‚atwego wykorzystania w projektach
  W tej sytuacji cookisy sÄ… ewidtenie na przegranej pozycji. Jednak pozostajÄ… one nadal uÅ¼yteczne w szczegolnosci do wszystkich operacji zwiazacnych z authentication - o tym w innym artykule.

Oba majÄ… te samo api i ich wykorzystanie wyglÄ…da praktycznie idetnczynie. Przy wyborze jednego z nich bierzemy pod uwagÄ™ jak dÅ‚ugo potrzebujemy przetrzymywaÄ‡ zapisane dane. Reszta artykuÅ‚u bedzie zawieraÄ‡ przykÅ‚ady dla `localStorage` ale warto pamietac ze zastosowanie ich z sessionStorage jest idetyczne. Dane zapisane w `localStorage` sÄ… dostÄ™pne w przeglÄ…rdce pomiedzy wszystkimi kartami i oknami pod warunkiem Å¼e pochodzÄ… z tego samego origin - jeÅ›li dodkonamy zmieny w jednym oknie (na same origin) to zmiany te beda widoczne w innym. Musimy to be on the same origin but the url path can be different.

W celu utworzenia nowego entries w `localStorage` object uÅ¼ywamy metody `setItem()`. Metoda `setItem()` przyjmuje dwa argumenty, key i odpowiadajÄ…ca mu wartoÅ›Ä‡:

```javascript
localStorage.setItem("kangur", "ðŸ¦˜")
```

W celu odczytania wartoÅ›ci uÅ¼ywamy metody `getItem()`. Przyjmuje ona jeden argument bedacy wczesniej uÅ¼ytym kluczem. Zwraca ona odpowiadajÄ…ca kluczowi wartoÅ›Ä‡ w formie stringa

```javascript
const myItem = localStorage.getItem("kangur")

// myItem = "ðŸ¦˜"
```

Aby updateowac wartosc zapsiana w `localStorage` uzywamy tej samej metody co w przypadku tworzenia nowego entries, stosujemy ten sam key zaÅ› zmienamy argument zawierajÄ…cy nowÄ… wartoÅ›Ä‡.

```javascript
localStorage.setItem("kangur", "ðŸ¦˜")
```

You can remove items from `localStorage` dwiema metodami. Przy uÅ¼yciu `removeItem()` ktora przyjmuje jeden argument bÄ™dacy kluczem obiektu `localStorage`:

```javascript
localStorage.removeItem(key)
```

Lub usunÄ…Ä‡ wszystkie items znajdujace sie w `localStorage` przy uÅ¼yciu `clear()` metoda.

```javascript
localStorage.clear()
```

## store non string with json

Przy uzyciu `localStorage` mozemy przechowywac jedynie string values. Czesto bedziemy spotykaÄ‡ sie z sytuacja w ktorej chcemy przchowac cale obiekty z danymi. Mozemy to zrobic przy uzyciu metod `JSON.stringify()` oraz `JSON.parse()` w nastepujacy sposob:

W celu dodania lub updatu key-value pair:

```javascript
let myObj = { kraj: "ðŸ‡®ðŸ‡¹", danie: "ðŸ•" }
localStorage.setItem(key, JSON.stringify(myObj))
```

Dzeiki temu `myObj` zostal zapisany w `localStorage` jako string a nie jako obiket. Ze wzgledu na to aby ponownie uzyc tego obiektu musimy z powrotem przywrocic go do typu obiketu:

```javascript
let item = JSON.parse(localStorage.getItem(key))

// item = { kraj: "ðŸ‡®ðŸ‡¹", danie: "ðŸ•" }
```

Dzieki temu zmienna item przyjela wartosc obiektu key i jest typu obiektu i mozemuy przeprowadzac na niej operacje przeprowadzalne na js obiektach.

## check for items

Czasmi moze sie okazac ze musimy sprawdzic czy posiadamy przypisane wartosci do `localStorage`. W tym celu mozemy uzyc zapisu:

```javascript
if (localStorage.length > 0) {
  // ...
}
```

Jesli w `localStorage` znajduje sie choc jeden item test z ifa zwroci true.

`localStorage.length` informuje nas o liczbie stored items.

## summary with diefferences and api

Web storage objects `localStorage` and `sessionStorage` allow to store key/value in the browser.

Both key and value must be strings.
The limit is 5mb+, depends on the browser.
They do not expire.
The data is bound to the origin (domain/port/protocol).

localStorage
Shared between all tabs and windows with the same origin
Survives browser restart

sessionStorage
Visible within a browser tab, including iframes from the same origin
Survives page refresh (but not tab close)
